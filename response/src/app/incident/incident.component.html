<h1>{{ (org | async)?.name }}</h1>

<div id="floating-panel">
  <b>Start: </b>
  <select [ngModel]="direction.origin"
          (ngModelChange)="direction.origin = $event; showDirection()">
    <option [ngValue]="'penn station, new york, ny'">Penn Station</option>
    <option [ngValue]="'grand central station, new york, ny'">Grand Central Station</option>
  </select>
  <b>End: </b>
  <select [ngModel]="direction.destination"
          (ngModelChange)="direction.destination = $event; showDirection()">
    <option [ngValue]="'260 Broadway New York NY 10007'">City Hall</option>
    <option [ngValue]="'W 49th St & 5th Ave, New York, NY 10020'">Rockefeller Center</option>
  </select>
  <input places-auto-complete
         (initialized$)="initialized($event)"
         (place_changed)="placeChanged(place)"
         [types]="['geocode']" />
  address: {{address | json}}
</div>
<div class="map-container">
  <ngui-map [options]="mapOptions">
      <drawing-manager id="draw"
                       [drawingMode]="'marker'"
                       [drawingControl]="true"
                       [drawingControlOptions]="{
          position: 2,
          drawingModes: ['marker', 'circle', 'polygon', 'polyline', 'rectangle']
         }">

      </drawing-manager>

      <polygon *ngFor="let poly of polygonsHandler | async" [paths]="poly.points"
               [strokeColor]="poly.color"
               [strokeOpacity]="0.8"
               [strokeWeight]="2"
               [fillColor]="poly.color"
               [fillOpacity]="0.35"></polygon>

      <circle *ngFor="let circle of circlesHandler | async" [center]="circle.center"
              [strokeColor]="circle.color"
              [fillColor]="circle.color"
              [strokeOpacity]="0.8"
              [strokeWeight]="2"
              [editable]="true"
              [radius]="circle.radius"
              draggable="false"></circle>


      <!--<marker *ngFor="let pos of positions | async" [position]="pos"></marker>-->
    <directions-renderer  *ngIf="editingUser"
                          [suppressMarkers]="true"
                          [draggable]="true"
                          (directions_changed)="directionsChanged()"
                          [directions-request]="direction">
    </directions-renderer>
    <marker *ngFor="let pos of markersHandler | async" [position]="pos">
    </marker>
  </ngui-map>
</div>
