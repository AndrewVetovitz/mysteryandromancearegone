<div class="row col-xs-6 org-left-pane">
  <div class="row">
    <mat-card class="col-xs-12">
      <mat-card-title>
        {{(org | async)?.name}}
      </mat-card-title>
      <mat-card-content>
        {{(auth.user | async)?.displayName}}
      </mat-card-content>
    </mat-card>
  </div>

  <div class="row">
    <mat-card class="clearfix">
      <mat-card-title>
        Members
      </mat-card-title>

      <mat-card-content *ngFor="let user of users | async" class="col-xs-12 members">
        <img style="height:40px;width:40px;float:left" [src]="user.data.photoURL">
        {{ user.data.displayName }} : {{user.data.email}}
      </mat-card-content>

      <mat-card-actions>
        <mat-expansion-panel>
          <mat-expansion-panel-header>
            <mat-panel-title>
              <mat-icon aria-label="Add Team Member">add_circle</mat-icon>
              Add Member
            </mat-panel-title>
          </mat-expansion-panel-header>
          <div>
            <mat-form-field class="col-xs-6">
              <input matInput placeholder="New Member Email" [(ngModel)]="newMemberEmail">
            </mat-form-field>
            <div class="col-xs-6">
              <button mat-icon-button (click)="addMember()">
                <mat-icon>done</mat-icon>
              </button>
              <button mat-icon-button>
                <mat-icon>clear</mat-icon>
              </button>
            </div>
          </div>
        </mat-expansion-panel>

      </mat-card-actions>

    </mat-card>
  </div>

  <div class="row">
    <mat-expansion-panel>

      <mat-expansion-panel-header>
        <mat-panel-title>
          Custom Drop-pins
        </mat-panel-title>
      </mat-expansion-panel-header>

      <div>
        <div *ngFor="let team of teams; let i = index;">
          <h2>
            {{team.name}}
          </h2>
          <div *ngFor="let pintext of team.premadePins">
            <p>
              {{pintext}}
            </p>
          </div>

          <mat-form-field class="col-xs-6">
            <input matInput placeholder="Description" [(ngModel)]="newPin">
          </mat-form-field>
          <div class="col-xs-6">
            <button mat-icon-button (click)="addPin(newPin, i); newPin=''; addPinIndex = -1;">
              <mat-icon>done</mat-icon>
            </button>
            <button mat-icon-button>
              <mat-icon>clear</mat-icon>
            </button>
          </div>
        </div>
      </div>
    </mat-expansion-panel>
  </div>
</div>

<div class="row col-xs-6">
  <div class="row">
    <mat-card class="clearfix">
      <mat-card-title>
        Current Incidents
      </mat-card-title>
    </mat-card>
  </div>
</div>

<h3>
  Teams
</h3>
<div>
  <div *ngFor="let team of teams; let i = index;">
    <p>
      {{team.name}}
    </p>
    <div *ngFor="let pintext of team.premadePins">
      <p>
        {{pintext}}
      </p>
    </div>
    <button (click)="addPinIndex = i"> add new pin quick text</button>
    <div *ngIf="addPinIndex == i">
      <input type="text" [(ngModel)]="newPin">
      <button (click)="addPin(newPin, i); newPin=''; addPinIndex = -1;">add pin</button>
    </div>
  </div>
</div>

<div>
  <h3>Add New Team</h3>
  <input type="text" [(ngModel)]="newTeamName">
  <button (click)="addTeam(newTeamName)">add new team</button>
</div>

<div>
  <h3> add New Incident</h3>
  <input type="text" [(ngModel)]="newIncident">
  <button (click)="addIncident(newIncident)">add new Incident</button>
</div>
<div>
  <h3> Current Incidents</h3>
  <div *ngFor="let incident of incidents | async">
    <p>
      {{incident.name}}
    </p>
  </div>
</div>
